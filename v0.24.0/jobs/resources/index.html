<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Documentation of HyperQueue."><meta name=author content="Ada Böhm, Jakub Beránek"><link href=https://it4innovations.github.io/hyperqueue/stable/jobs/resources/ rel=canonical><link href=../arrays/ rel=prev><link href=../cresources/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.14"><title>Resources - HyperQueue</title><link rel=stylesheet href=../../assets/stylesheets/main.342714a4.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-TM8J8R5GJ9"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-TM8J8R5GJ9",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-TM8J8R5GJ9",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#resource-management class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> <aside class="md-banner md-banner--warning"> <div class="md-banner__inner md-grid md-typeset"> You're not viewing the current stable version. <a href=../../..> <b>Click here to go to the stable version.</b> </a> </div> <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script> </aside> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title=HyperQueue class="md-header__button md-logo" aria-label=HyperQueue data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> HyperQueue </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Resources </span> </div> </div> </div> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/It4innovations/hyperqueue title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title=HyperQueue class="md-nav__button md-logo" aria-label=HyperQueue data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> HyperQueue </label> <div class=md-nav__source> <a href=https://github.com/It4innovations/hyperqueue title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../quickstart/ class=md-nav__link> <span class=md-ellipsis> Quickstart </span> </a> </li> <li class=md-nav__item> <a href=../../cheatsheet/ class=md-nav__link> <span class=md-ellipsis> Cheatsheet </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Examples </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Examples </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/ class=md-nav__link> <span class=md-ellipsis> Examples </span> </a> </li> <li class=md-nav__item> <a href=../../examples/data-arrays/ class=md-nav__link> <span class=md-ellipsis> Processing data arrays </span> </a> </li> <li class=md-nav__item> <a href=../../examples/iterative-computation/ class=md-nav__link> <span class=md-ellipsis> Iterative computation </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Deployment </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Deployment </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../deployment/ class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/server/ class=md-nav__link> <span class=md-ellipsis> Server </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/worker/ class=md-nav__link> <span class=md-ellipsis> Workers </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/allocation/ class=md-nav__link> <span class=md-ellipsis> Automatic Allocation </span> </a> </li> <li class=md-nav__item> <a href=../../deployment/cloud/ class=md-nav__link> <span class=md-ellipsis> Without Shared Filesystem </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6 checked> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> Task computation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=true> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Task computation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../jobs/ class=md-nav__link> <span class=md-ellipsis> Jobs and Tasks </span> </a> </li> <li class=md-nav__item> <a href=../arrays/ class=md-nav__link> <span class=md-ellipsis> Task Arrays </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Resources </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Resources </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#resource-management class=md-nav__link> <span class=md-ellipsis> Resource management </span> </a> </li> <li class=md-nav__item> <a href=#worker-resources class=md-nav__link> <span class=md-ellipsis> Worker resources </span> </a> <nav class=md-nav aria-label="Worker resources"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#specifying-worker-resources class=md-nav__link> <span class=md-ellipsis> Specifying worker resources </span> </a> </li> <li class=md-nav__item> <a href=#resource-names class=md-nav__link> <span class=md-ellipsis> Resource names </span> </a> </li> <li class=md-nav__item> <a href=#automatically-detected-resources class=md-nav__link> <span class=md-ellipsis> Automatically detected resources </span> </a> <nav class=md-nav aria-label="Automatically detected resources"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configuring-automatic-detection class=md-nav__link> <span class=md-ellipsis> Configuring automatic detection </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#resource-request class=md-nav__link> <span class=md-ellipsis> Resource request </span> </a> </li> <li class=md-nav__item> <a href=#requesting-all-resources class=md-nav__link> <span class=md-ellipsis> Requesting all resources </span> </a> </li> <li class=md-nav__item> <a href=#resource-request-strategies class=md-nav__link> <span class=md-ellipsis> Resource request strategies </span> </a> <nav class=md-nav aria-label="Resource request strategies"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#example class=md-nav__link> <span class=md-ellipsis> Example </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#resource-coupling class=md-nav__link> <span class=md-ellipsis> Resource coupling </span> </a> <nav class=md-nav aria-label="Resource coupling"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#example_1 class=md-nav__link> <span class=md-ellipsis> Example </span> </a> </li> <li class=md-nav__item> <a href=#strict-strategies class=md-nav__link> <span class=md-ellipsis> Strict strategies </span> </a> </li> <li class=md-nav__item> <a href=#non-integer-allocation-of-resources class=md-nav__link> <span class=md-ellipsis> Non-integer allocation of resources </span> </a> </li> <li class=md-nav__item> <a href=#resource-environment-variables class=md-nav__link> <span class=md-ellipsis> Resource environment variables </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#resource-requests-and-job-arrays class=md-nav__link> <span class=md-ellipsis> Resource requests and job arrays </span> </a> </li> <li class=md-nav__item> <a href=#resource-variants class=md-nav__link> <span class=md-ellipsis> Resource variants </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../cresources/ class=md-nav__link> <span class=md-ellipsis> CPU Resources </span> </a> </li> <li class=md-nav__item> <a href=../failure/ class=md-nav__link> <span class=md-ellipsis> Handling Failure </span> </a> </li> <li class=md-nav__item> <a href=../streaming/ class=md-nav__link> <span class=md-ellipsis> Output Streaming </span> </a> </li> <li class=md-nav__item> <a href=../directives/ class=md-nav__link> <span class=md-ellipsis> Directives </span> </a> </li> <li class=md-nav__item> <a href=../jobfile/ class=md-nav__link> <span class=md-ellipsis> Job Definition File </span> </a> </li> <li class=md-nav__item> <a href=../openjobs/ class=md-nav__link> <span class=md-ellipsis> Open jobs </span> </a> </li> <li class=md-nav__item> <a href=../multinode/ class=md-nav__link> <span class=md-ellipsis> Multinode Tasks </span> </a> </li> <li class=md-nav__item> <a href=../explain/ class=md-nav__link> <span class=md-ellipsis> Explain command </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> CLI </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> CLI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../cli/dashboard/ class=md-nav__link> <span class=md-ellipsis> Dashboard </span> </a> </li> <li class=md-nav__item> <a href=../../cli/shortcuts/ class=md-nav__link> <span class=md-ellipsis> Shortcuts </span> </a> </li> <li class=md-nav__item> <a href=../../cli/output-mode/ class=md-nav__link> <span class=md-ellipsis> Output mode </span> </a> </li> <li class=md-nav__item> <a href=../../cli/documentation/ class=md-nav__link> <span class=md-ellipsis> Documentation </span> </a> </li> <li class=md-nav__item> <a href=../../cli/shell-completion/ class=md-nav__link> <span class=md-ellipsis> Shell completion </span> </a> </li> <li class=md-nav__item> <a href=../../cli-reference/ class=md-nav__link> <span class=md-ellipsis> CLI reference </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8 id=__nav_8_label tabindex=0> <span class=md-ellipsis> Python API </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Python API </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../python/ class=md-nav__link> <span class=md-ellipsis> Getting started </span> </a> </li> <li class=md-nav__item> <a href=../../python/client/ class=md-nav__link> <span class=md-ellipsis> Client </span> </a> </li> <li class=md-nav__item> <a href=../../python/submit/ class=md-nav__link> <span class=md-ellipsis> Submitting jobs </span> </a> </li> <li class=md-nav__item> <a href=../../python/dependencies/ class=md-nav__link> <span class=md-ellipsis> Dependencies </span> </a> </li> <li class=md-nav__item> <a href=../../python/apidoc/ class=md-nav__link> <span class=md-ellipsis> API reference </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../changelog/ class=md-nav__link> <span class=md-ellipsis> Changelog </span> </a> </li> <li class=md-nav__item> <a href=../../faq/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> <li class=md-nav__item> <a href=../../other-tools/ class=md-nav__link> <span class=md-ellipsis> Comparison With Other Tools </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#resource-management class=md-nav__link> <span class=md-ellipsis> Resource management </span> </a> </li> <li class=md-nav__item> <a href=#worker-resources class=md-nav__link> <span class=md-ellipsis> Worker resources </span> </a> <nav class=md-nav aria-label="Worker resources"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#specifying-worker-resources class=md-nav__link> <span class=md-ellipsis> Specifying worker resources </span> </a> </li> <li class=md-nav__item> <a href=#resource-names class=md-nav__link> <span class=md-ellipsis> Resource names </span> </a> </li> <li class=md-nav__item> <a href=#automatically-detected-resources class=md-nav__link> <span class=md-ellipsis> Automatically detected resources </span> </a> <nav class=md-nav aria-label="Automatically detected resources"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configuring-automatic-detection class=md-nav__link> <span class=md-ellipsis> Configuring automatic detection </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#resource-request class=md-nav__link> <span class=md-ellipsis> Resource request </span> </a> </li> <li class=md-nav__item> <a href=#requesting-all-resources class=md-nav__link> <span class=md-ellipsis> Requesting all resources </span> </a> </li> <li class=md-nav__item> <a href=#resource-request-strategies class=md-nav__link> <span class=md-ellipsis> Resource request strategies </span> </a> <nav class=md-nav aria-label="Resource request strategies"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#example class=md-nav__link> <span class=md-ellipsis> Example </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#resource-coupling class=md-nav__link> <span class=md-ellipsis> Resource coupling </span> </a> <nav class=md-nav aria-label="Resource coupling"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#example_1 class=md-nav__link> <span class=md-ellipsis> Example </span> </a> </li> <li class=md-nav__item> <a href=#strict-strategies class=md-nav__link> <span class=md-ellipsis> Strict strategies </span> </a> </li> <li class=md-nav__item> <a href=#non-integer-allocation-of-resources class=md-nav__link> <span class=md-ellipsis> Non-integer allocation of resources </span> </a> </li> <li class=md-nav__item> <a href=#resource-environment-variables class=md-nav__link> <span class=md-ellipsis> Resource environment variables </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#resource-requests-and-job-arrays class=md-nav__link> <span class=md-ellipsis> Resource requests and job arrays </span> </a> </li> <li class=md-nav__item> <a href=#resource-variants class=md-nav__link> <span class=md-ellipsis> Resource variants </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/It4innovations/hyperqueue/blob/main/docs/jobs/resources.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg> </a> <h1>Resources</h1> <h2 id=resource-management>Resource management<a class=headerlink href=#resource-management title="Permanent link">#</a></h2> <p>Resource management serves for defining arbitrary resources provided by workers and also corresponding <strong>resource requests</strong> required by tasks. HyperQueue will take care of matching task resource requests so that only workers that can fulfill them will be able to execute such tasks.</p> <p>Some generic resources are <a href=#automatically-detected-resources>automatically detected</a>; however, users may also define their own resources.</p> <p>From version 0.13.0, CPUs are also managed as other resources, but they have still some extra functionality; therefore, there is a special section about <a href=../cresources/ >CPU resources</a>.</p> <div class="admonition important"> <p class=admonition-title>Important</p> <p>Resources in HyperQueue exist on a purely logical level. They can correspond to physical things (like GPUs), but it is the responsibility of the user to make sure that this correspondence makes sense. With exception of CPUs, HyperQueue by itself does not attach any semantics to resources, they are just numbers used for scheduling.</p> </div> <h2 id=worker-resources>Worker resources<a class=headerlink href=#worker-resources title="Permanent link">#</a></h2> <p>Each worker has one or more resources attached. Each resource is a <strong>resource pool</strong> identified by a name. A resource pool represents some resources provided by a worker; each task can then ask for a part of the resources contained in that pool.</p> <p>There are two kinds of resource pools:</p> <ul> <li><strong>Indexed pool</strong>: This pool represents an enumerated set of resources represented by strings. Each resource has its own identity. Tasks do not ask for specific values from the set, they just specify how many resources they require and HyperQueue will allocate the specified amount of resources from the pool for each task.</li> </ul> <p>This pool is useful for resources that have their own identity, for example individual GPU or FPGA accelerators.</p> <p>HyperQueue guarantees that no individual resource from the indexed pool is allocated to more than a single task at any given time and that a task will not be executed on a worker if it does not currently have enough individual resources to fulfill the <a href=#resource-request>resource request</a> of the task.</p> <p>Indexed pool can be defined with <strong>groups</strong> where indices live in separated groups. Task may then ask for different allocation policies (e.g. use resources from the same or different groups). The main purpose of this is to capture NUMA architectures, each group then represents a socket with cores.</p> <ul> <li><strong>Sum pool</strong>: This pool represents a resource that has a certain size which is split into individual tasks. A typical example is memory; if a worker has <code>2000</code> bytes of memory, it can serve e.g. four tasks, if each task asks for <code>500</code> bytes of memory.</li> </ul> <p>HyperQueue guarantees that the sum of resource request sizes of <em>running</em> tasks on a worker does not exceed the total size of the sum pool.</p> <h3 id=specifying-worker-resources>Specifying worker resources<a class=headerlink href=#specifying-worker-resources title="Permanent link">#</a></h3> <p>You can specify the resource pools of a worker when you start it:</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>hq<span class=w> </span>worker<span class=w> </span>start<span class=w> </span>--resource<span class=w> </span><span class=s2>&quot;&lt;NAME-1&gt;=&lt;DEF-1&gt;&quot;</span><span class=w> </span>--resource<span class=w> </span><span class=s2>&quot;&lt;NAME-2&gt;=&lt;DEF-2&gt;&quot;</span><span class=w> </span>...
</code></pre></div> <p>where <code>NAME-i</code> is a name (string ) of the <code>i</code>-th resource pool and <code>DEF-i</code> is a definition of the <code>i-th</code> resource pool. You can define resource pools using one of the following formats:</p> <ul> <li><code>[&lt;VALUE&gt;, &lt;VALUE&gt;, ..., &lt;VALUE&gt;]</code> where <code>VALUE</code> is a string. This defines a an indexed pool with the given values. If you need to enter a string resource that contains special characters (<code>[</code>, <code>]</code>, <code>,</code>, whitespace), you can wrap the value in quotes: <code>["foo [,]", bar, "my resource"]</code>.</li> <li><code>range(&lt;START&gt;-&lt;END&gt;)</code> where <code>START</code> and <code>END</code> are non-negative integers. This defines an indexed pool with numbers in the inclusive range <code>[START, END]</code>.</li> <li><code>[[&lt;VALUE&gt;, ..., &lt;VALUE&gt;], [&lt;VALUE&gt;, ..., &lt;VALUE&gt;], ...]</code> where <code>VALUE</code> is a string. This defines an indexed pool where indices are grouped.</li> <li><code>&lt;N&gt;x&lt;M&gt;</code> Creates indexed pool with N groups of size M, indices are indexed from 0, (e.g. "2x3" is equivalent to <code>[[0, 1, 2], [3, 4, 5]</code>)</li> <li><code>sum(&lt;SIZE&gt;)</code> where <code>SIZE</code> is a positive integer. This defines a sum pool with the given size.</li> </ul> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>You might encounter a problem in your shell when you try to specify worker resources, because the definition contains parentheses (<code>()</code>). In that case just wrap the resource definition in quotes, like this:</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>hq<span class=w> </span>worker<span class=w> </span>start<span class=w> </span>--resource<span class=w> </span><span class=s2>&quot;foo=sum(5)&quot;</span>
</code></pre></div> </div> <h3 id=resource-names>Resource names<a class=headerlink href=#resource-names title="Permanent link">#</a></h3> <p>Resource names are restricted by the following rules:</p> <ul> <li>They can only contain ASCII letters and digits (<code>a-z</code>, <code>A-Z</code>, <code>0-9</code>) and the slash (<code>/</code>) symbol.</li> <li>They need to begin with an ASCII letter.</li> </ul> <p>These restrictions exist because the resource names are passed as environment variable names to tasks, which often execute shell scripts. However, shells typically do not support environment variables containing anything else than ASCII letters, digits and the underscore symbol. Therefore, HQ limits resource naming to align with the behaviour of the shell.</p> <div class="admonition important"> <p class=admonition-title>Important</p> <p>HQ will normalize the resource name when passing environment variables to a task (see <a href=#resource-environment-variables>below</a>).</p> </div> <h3 id=automatically-detected-resources>Automatically detected resources<a class=headerlink href=#automatically-detected-resources title="Permanent link">#</a></h3> <p>The following resources are detected automatically if a resource of a given name is not explicitly defined.</p> <ul> <li> <p>CPUs are automatically detected as resource named "cpus" (more in <a href=../cresources/ >CPU resources</a>).</p> </li> <li> <p>GPUs that are available when a worker is started are automatically detected under the following resource names:</p> <ul> <li>NVIDIA GPUs are stored the under resource name <code>gpus/nvidia</code>. These GPUs are detected from the environment variable <code>CUDA_VISIBLE_DEVICES</code> or from the <code>procfs</code> filesystem.</li> <li>AMD GPUs are stored under the resource name <code>gpus/amd</code>. These GPUs are detected from the environment variable <code>ROCR_VISIBLE_DEVICES</code>.</li> </ul> <p>You can set these environment variables when starting a worker to override the list of available GPUs:</p> <div class=highlight><pre><span></span><code>$<span class=w> </span><span class=nv>CUDA_VISIBLE_DEVICES</span><span class=o>=</span><span class=m>2</span>,3<span class=w> </span>hq<span class=w> </span>worker<span class=w> </span>start
<span class=c1># The worker will have resource gpus/nvidia=[2,3]</span>
</code></pre></div> </li> <li> <p>RAM of the node is detected as resource "mem" in megabytes.</p> </li> </ul> <p>If you want to see which specific resource values would be detected by a worker (without actually starting it), you can use the <a href=https://it4innovations.github.io/hyperqueue/stable/cli-reference/#hq/worker/hwdetect><code>hq worker hwdetect</code></a> command:</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>hq<span class=w> </span>worker<span class=w> </span>hwdetect
</code></pre></div> <h4 id=configuring-automatic-detection>Configuring automatic detection<a class=headerlink href=#configuring-automatic-detection title="Permanent link">#</a></h4> <p>You can affect which kinds of resources are automatically detected using the <code>--detect-resources</code> argument of <a href=https://it4innovations.github.io/hyperqueue/stable/cli-reference/#hq/worker/start><code>hq worker start</code></a>:</p> <ul> <li>The default value is <code>all</code>, which will detect all default resources known to HyperQueue (CPUs, memory and NVIDIA/AMD GPUs).</li> <li>You can opt out of automatic detection by passing <code>none</code>: <code>--detect-resources=none</code>.<ul> <li>Note that if you opt out of detecting CPU cores, you will need to specify CPUs explicitly using <code>--cpus</code> or <code>--resource cpus</code>.</li> </ul> </li> <li>You can specify a comma-separated list of things that should be detected, e.g. <code>--detect-resources=cpus,mem,gpus/nvidia</code>.<ul> <li>This can be useful to opt out of detection of invalid resources e.g. on clusters that set environment variables even for hardware that is not present (e.g. they set <code>ROCM_VISIBLE_DEVICES</code> even if no AMD GPUs are present).</li> </ul> </li> </ul> <h2 id=resource-request>Resource request<a class=headerlink href=#resource-request title="Permanent link">#</a></h2> <p>When you submit a job, you can define a <strong>resource requests</strong> with the <code>--resource</code> flag:</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>hq<span class=w> </span>submit<span class=w> </span>--resource<span class=w> </span>&lt;NAME1&gt;<span class=o>=</span>&lt;AMOUNT1&gt;<span class=w> </span>--resource<span class=w> </span>&lt;NAME2&gt;<span class=o>=</span>&lt;AMOUNT2&gt;<span class=w> </span>...
</code></pre></div> <p>Where <code>NAME</code> is a name of the requested resource and the <code>AMOUNT</code> is a positive number defining the size of the request.</p> <p>Tasks with such resource requests will only be executed on workers that fulfill all the specified task requests.</p> <div class="admonition important"> <p class=admonition-title>Important</p> <p>Notice that task resource requests always ask for an amount of resources required by a task, regardless whether that resource corresponds to an indexed or a sum pool on workers.</p> <p>For example, let's say that a worker has an indexed pool of GPUs: <div class=highlight><pre><span></span><code>$<span class=w> </span>hq<span class=w> </span>worker<span class=w> </span>start<span class=w> </span>--resource<span class=w> </span><span class=s2>&quot;gpus/nvidia=range(1-3)&quot;</span>
</code></pre></div> And we create two jobs, each with a single task. The first job wants 1 GPU, the second one wants two GPUs.</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>hq<span class=w> </span>submit<span class=w> </span>--resource<span class=w> </span>gpus/nvidia<span class=o>=</span><span class=m>1</span><span class=w> </span>...
$<span class=w> </span>hq<span class=w> </span>submit<span class=w> </span>--resource<span class=w> </span>gpus/nvidia<span class=o>=</span><span class=m>2</span><span class=w> </span>...
</code></pre></div> <p>Then the first job can be allocated e.g. the GPU <code>2</code> and the second job can be allocated the GPUs <code>1</code> and <code>3</code>.</p> </div> <h2 id=requesting-all-resources>Requesting all resources<a class=headerlink href=#requesting-all-resources title="Permanent link">#</a></h2> <p>A task may ask for all given resources of that type by specifying <code>--resource &lt;NAME&gt;=all</code>. Such a task will be scheduled only on a worker that has at least <code>1</code> of such a resource and when a task is executed all resources of that type will be given to this task.</p> <h2 id=resource-request-strategies>Resource request strategies<a class=headerlink href=#resource-request-strategies title="Permanent link">#</a></h2> <p>When resource request is defined, after the amount you can define allocation strategy: <code>--resource &lt;NAME&gt;="&lt;AMOUNT&gt; &lt;STRATEGY&gt;"</code>.</p> <p>Example:</p> <div class=highlight><pre><span></span><code><span class=gp>$ </span>hq<span class=w> </span>submit<span class=w> </span>--resource<span class=w> </span><span class=nv>cpus</span><span class=o>=</span><span class=s2>&quot;8 compact!&quot;</span><span class=w> </span>...
</code></pre></div> <p>Specifying strategy has effect only if the worker provides indexed resource in groups. If resource is other type, then strategy is ignored.</p> <p>When strategy is not defined then <code>compact</code> is used as default.</p> <p>Strategies:</p> <ul> <li> <p><strong>Compact</strong> (<code>compact</code>) -- Tries to allocate indices in few groups as possible in the current worker state. After the minimal number of groups is chosen, then the indices are taken evenly from the selected groups.</p> </li> <li> <p><strong>Strict Compact</strong> (<code>compact!</code>) -- Always allocate indices on as few groups as possible for a target target. The task is not executed until this requirement could not be fully fulfilled. E.g. If a worker has 4 indices per a group and you ask for 4 indices in the strict compact mode, it will always be executed with indices from a single group. If you ask for 8 cpus in the same way, it will always be executed with indices from two groups.</p> </li> <li> <p><strong>Tight</strong> (<code>tight</code>) - Similarly to <code>compact</code>, the mode tries to allocate indices in few groups as possible in the current worker state. When the groups are chosen, then it packs as much as possible to the first group, then to the second, etc. See the Example below.</p> </li> <li> <p><strong>Strict tight</strong> (<code>tight!</code>) -- Strict mode for <code>tight</code>. Works as <code>tight</code> but a task is not executed until the minial number of groups for the given worker could not be achieved.</p> </li> <li> <p><strong>Scatter</strong> (<code>scatter</code>) - Allocate indices across as many groups as possible in the current worker state. E.g. Let us assume that a worker has 4 groups with 8 indices per group, and you ask for 8 cpus in the scatter mode. If possible in the current situation, HQ tries to run a process with 2 cpus on each socket.</p> </li> </ul> <h3 id=example>Example<a class=headerlink href=#example title="Permanent link">#</a></h3> <p>Let us assume that we have worker with resource <code>foo</code> that have indices organized to 3 groups with 4 indices in each group. We assume that all resources are free. The allocations in the square brackets below means how many indices we got from different groups, e.g. <code>[4, 2]</code> means that we get <code>4</code> indices from a group, and <code>2</code> indices from another group.</p> <ul> <li><code>6 compact</code> allocates: <code>[3, 3]</code></li> <li><code>6 tight</code> allocates: <code>[4, 2]</code></li> <li><code>6 scatter</code> allocates: <code>[2, 2, 2]</code></li> </ul> <h2 id=resource-coupling>Resource coupling<a class=headerlink href=#resource-coupling title="Permanent link">#</a></h2> <p>Resource coupling extends the HQ ability to capture NUMA architectures. It allows saying that two or more resources of the worker should be allocated together (from the same groups). For example, we may want to allocate CPUs and GPUs from the same NUMA node.</p> <p>The current version does not provide automatic detection of coupling; you need to specify it manually, via option <code>--coupling</code> when the worker is started.</p> <p>For example:</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>hq<span class=w> </span>worker<span class=w> </span>starts<span class=w> </span>...<span class=w> </span>--coupling<span class=o>=</span>cpus,gpus
</code></pre></div> <p>Coupled resources have to be indexed resources with groups, and they all need to have the same number of groups. The allocation then considers the groups of these resources aligned, i.e., when we have a compact request from coupled resources, they should be allocated from the same groups.</p> <p>When coupling is enabled, it modifies the behavior of <code>compact</code> and <code>tight</code> strategies when more coupled resources are requested. They do not minimize the number of used groups individually, but minizies it for all requested coupled resources.</p> <h3 id=example_1>Example<a class=headerlink href=#example_1 title="Permanent link">#</a></h3> <p>Let us assume that we have worker with resource <code>cpus</code> that have indices organized to 3 groups with 4 indices in each group. And resource <code>gpus</code> that have 3 groups with 2 indices within each group.</p> <ul> <li><code>cpus=6 compact</code> and <code>gpus=2 compact</code> allocates <code>cpus=[3, 3]</code>, <code>gpus=[1, 1]</code></li> <li><code>cpus=1 compact</code> and <code>gpus=2 compact</code> allocates <code>cpus=[1]</code>, <code>gpus=[2]</code></li> <li><code>cpus=6 tight</code> and <code>gpus=2 compact</code> allocates <code>cpus=[4, 2]</code>, <code>gpus=[1, 1]</code></li> <li><code>cpus=6 tight</code> and <code>gpus=2 tight</code> allocates <code>cpus=[4, 2]</code>, <code>gpus=[2]</code></li> </ul> <h3 id=strict-strategies>Strict strategies<a class=headerlink href=#strict-strategies title="Permanent link">#</a></h3> <p>The coupling also modifies the semantics of strict strategies. The condition is stricter in such the case. The minimal number of groups has to be achievable not only individually, but also across all requested coupled resources with <code>compact!</code> or <code>tight!</code> strategies.</p> <p>Let us assume a worker from the example above. And assume that the there are the following free resources:</p> <ul> <li><code>cpus=[4, 4, 0]</code></li> <li><code>gpus=[0, 2, 2]</code></li> </ul> <p>The request <code>cpus=8 compact!</code> and <code>gpus=4 compact!</code> is enabled on a worker where <code>cpus</code> and <code>gpus</code> are not coupled; because each both resources can be taken from the minimal number of groups.</p> <p>The same request is not enabled on a worker where <code>cpus</code> and <code>gpus</code> are coupled, because resources are taken from three groups if we take an union of the used groups. But we can achieve a two groups in the union. e.g. the following situation:</p> <ul> <li><code>cpus=[4, 4, 0]</code></li> <li><code>gpus=[2, 2, 0]</code></li> </ul> <h3 id=non-integer-allocation-of-resources>Non-integer allocation of resources<a class=headerlink href=#non-integer-allocation-of-resources title="Permanent link">#</a></h3> <p>Amount of the resource may be a non-integer number. E.g. you may ask for 0.5 of a resource. It tells the scheduler that you want to utilize only half of the resource and if another process asks for at most 0.5 of the resource, it may get the same resource. This resource sharing is done on logical of HyperQueue and actual resource sharing is up to tasks.</p> <p>The precision for defining amount is four decimal places. Therefore, the minimal resource amount that you can ask for is <code>0.0001</code>.</p> <p>For sum resources, the amount is simply removed from the pool as in the case of integer resources.</p> <p>In the case of an indexed resource, the partial resource is always taken from a single index. It means that if there is an indexed resource with two indices that are both utilized on 0.75, then a task that asks for 0.5 of this resource will not be started, despite there is available 0.5 of the resource in total, because there is no single index that is free at least on 0.5.</p> <p>If non-integer is bigger than 1, then integer part is always satisfied as whole indices and the rest is a part of another index. E.g., when you ask for 2.5 of an indexed resource, you will get 2 complete indices and one index allocated on 50%.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>In the current version, policy "compact!" is not allowed with non-integer amounts.</p> </div> <h3 id=resource-environment-variables>Resource environment variables<a class=headerlink href=#resource-environment-variables title="Permanent link">#</a></h3> <p>When a task that has resource requests is executed, the following variables are passed to it for each resource request named <code>&lt;NAME&gt;</code>:</p> <ul> <li><code>HQ_RESOURCE_REQUEST_&lt;NAME&gt;</code> contains the amount of requested resources.</li> <li><code>HQ_RESOURCE_VALUES_&lt;NAME&gt;</code> contains the specific resource values allocated for the task as a comma-separated list. This variable is only filled for an indexed resource pool. In the case of non-integer amount, the partially allocated index is always the last index.</li> </ul> <p>The slash symbol (<code>/</code>) in resource name is normalized to underscore (<code>_</code>) when being used in the environment variable name.</p> <p>HQ also sets additional environment variables for various resources with special names:</p> <ul> <li>For the resource <code>gpus/nvidia</code>, HQ will set:<ul> <li><code>CUDA_VISIBLE_DEVICES</code> to the same value as <code>HQ_RESOURCE_VALUES_gpus_nvidia</code></li> <li><code>CUDA_DEVICE_ORDER</code> to <code>PCI_BUS_ID</code></li> </ul> </li> <li>For the resource <code>gpus/amd</code>, HQ will set:<ul> <li><code>ROCR_VISIBLE_DEVICES</code> to the same value as <code>HQ_RESOURCE_VALUES_gpus_amd</code></li> </ul> </li> </ul> <h2 id=resource-requests-and-job-arrays>Resource requests and job arrays<a class=headerlink href=#resource-requests-and-job-arrays title="Permanent link">#</a></h2> <p>Resource requests are applied to each task of job. For example, if you submit the following:</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>hq<span class=w> </span>submit<span class=w> </span>--cpus<span class=o>=</span><span class=m>2</span><span class=w> </span>--array<span class=o>=</span><span class=m>1</span>-10
</code></pre></div> <p>then each task will require two cores.</p> <h2 id=resource-variants>Resource variants<a class=headerlink href=#resource-variants title="Permanent link">#</a></h2> <p>A task may have attached more resource requests. There is no command line interface for this feature, but it can be configured through a <a href=../jobfile/ >Job Definition File</a>.</p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="August 28, 2025 09:44:36 UTC">August 28, 2025</span> </span> <span class=md-source-file__fact> <span class=md-icon title=Created> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="June 8, 2021 09:37:30 UTC">June 8, 2021</span> </span> </aside> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../arrays/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Task Arrays"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Task Arrays </div> </div> </a> <a href=../cresources/ class="md-footer__link md-footer__link--next" aria-label="Next: CPU Resources"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> CPU Resources </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["header.autohide", "navigation.instant", "navigation.top", "navigation.footer", "content.action.edit", "content.code.copy"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "stable", "provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.13a4f30d.min.js></script> </body> </html>