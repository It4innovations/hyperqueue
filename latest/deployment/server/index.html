<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Documentation of HyperQueue."><meta name=author content="Ada Böhm, Jakub Beránek"><link href=https://it4innovations.github.io/hyperqueue/stable/deployment/server/ rel=canonical><link href=../ rel=prev><link href=../worker/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.14"><title>Server - HyperQueue</title><link rel=stylesheet href=../../assets/stylesheets/main.342714a4.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../stylesheets/extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-TM8J8R5GJ9"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-TM8J8R5GJ9",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-TM8J8R5GJ9",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#starting-the-server class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> <aside class="md-banner md-banner--warning"> <div class="md-banner__inner md-grid md-typeset"> You're not viewing the current stable version. <a href=../../..> <b>Click here to go to the stable version.</b> </a> </div> <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script> </aside> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title=HyperQueue class="md-header__button md-logo" aria-label=HyperQueue data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> HyperQueue </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Server </span> </div> </div> </div> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/It4innovations/hyperqueue title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title=HyperQueue class="md-nav__button md-logo" aria-label=HyperQueue data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> HyperQueue </label> <div class=md-nav__source> <a href=https://github.com/It4innovations/hyperqueue title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../installation/ class=md-nav__link> <span class=md-ellipsis> Installation </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../quickstart/ class=md-nav__link> <span class=md-ellipsis> Quickstart </span> </a> </li> <li class=md-nav__item> <a href=../../cheatsheet/ class=md-nav__link> <span class=md-ellipsis> Cheatsheet </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Examples </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Examples </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/ class=md-nav__link> <span class=md-ellipsis> Examples </span> </a> </li> <li class=md-nav__item> <a href=../../examples/data-arrays/ class=md-nav__link> <span class=md-ellipsis> Processing data arrays </span> </a> </li> <li class=md-nav__item> <a href=../../examples/iterative-computation/ class=md-nav__link> <span class=md-ellipsis> Iterative computation </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5 checked> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Deployment </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=true> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Deployment </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Server </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Server </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#starting-the-server class=md-nav__link> <span class=md-ellipsis> Starting the server </span> </a> </li> <li class=md-nav__item> <a href=#server-directory class=md-nav__link> <span class=md-ellipsis> Server directory </span> </a> </li> <li class=md-nav__item> <a href=#running-multiple-servers class=md-nav__link> <span class=md-ellipsis> Running multiple servers </span> </a> </li> <li class=md-nav__item> <a href=#keeping-the-server-alive class=md-nav__link> <span class=md-ellipsis> Keeping the server alive </span> </a> </li> <li class=md-nav__item> <a href=#resuming-stoppedcrashed-server class=md-nav__link> <span class=md-ellipsis> Resuming stopped/crashed server </span> </a> <nav class=md-nav aria-label="Resuming stopped/crashed server"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#exporting-journal-events class=md-nav__link> <span class=md-ellipsis> Exporting journal events </span> </a> </li> <li class=md-nav__item> <a href=#journal-report class=md-nav__link> <span class=md-ellipsis> Journal report </span> </a> </li> <li class=md-nav__item> <a href=#pruning-the-journal class=md-nav__link> <span class=md-ellipsis> Pruning the journal </span> </a> </li> <li class=md-nav__item> <a href=#flushing-the-journal class=md-nav__link> <span class=md-ellipsis> Flushing the journal </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#waiting-for-server-availability class=md-nav__link> <span class=md-ellipsis> Waiting for server availability </span> </a> </li> <li class=md-nav__item> <a href=#stopping-the-server class=md-nav__link> <span class=md-ellipsis> Stopping the server </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../worker/ class=md-nav__link> <span class=md-ellipsis> Workers </span> </a> </li> <li class=md-nav__item> <a href=../allocation/ class=md-nav__link> <span class=md-ellipsis> Automatic Allocation </span> </a> </li> <li class=md-nav__item> <a href=../cloud/ class=md-nav__link> <span class=md-ellipsis> Without Shared Filesystem </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> Task computation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Task computation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../jobs/jobs/ class=md-nav__link> <span class=md-ellipsis> Jobs and Tasks </span> </a> </li> <li class=md-nav__item> <a href=../../jobs/arrays/ class=md-nav__link> <span class=md-ellipsis> Task Arrays </span> </a> </li> <li class=md-nav__item> <a href=../../jobs/resources/ class=md-nav__link> <span class=md-ellipsis> Resources </span> </a> </li> <li class=md-nav__item> <a href=../../jobs/cresources/ class=md-nav__link> <span class=md-ellipsis> CPU Resources </span> </a> </li> <li class=md-nav__item> <a href=../../jobs/failure/ class=md-nav__link> <span class=md-ellipsis> Handling Failure </span> </a> </li> <li class=md-nav__item> <a href=../../jobs/streaming/ class=md-nav__link> <span class=md-ellipsis> Output Streaming </span> </a> </li> <li class=md-nav__item> <a href=../../jobs/directives/ class=md-nav__link> <span class=md-ellipsis> Directives </span> </a> </li> <li class=md-nav__item> <a href=../../jobs/jobfile/ class=md-nav__link> <span class=md-ellipsis> Job Definition File </span> </a> </li> <li class=md-nav__item> <a href=../../jobs/openjobs/ class=md-nav__link> <span class=md-ellipsis> Open jobs </span> </a> </li> <li class=md-nav__item> <a href=../../jobs/multinode/ class=md-nav__link> <span class=md-ellipsis> Multinode Tasks </span> </a> </li> <li class=md-nav__item> <a href=../../jobs/explain/ class=md-nav__link> <span class=md-ellipsis> Explain command </span> </a> </li> <li class=md-nav__item> <a href=../../jobs/notify/ class=md-nav__link> <span class=md-ellipsis> Task Notifications </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> CLI </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> CLI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../cli/dashboard/ class=md-nav__link> <span class=md-ellipsis> Dashboard </span> </a> </li> <li class=md-nav__item> <a href=../../cli/shortcuts/ class=md-nav__link> <span class=md-ellipsis> Shortcuts </span> </a> </li> <li class=md-nav__item> <a href=../../cli/output-mode/ class=md-nav__link> <span class=md-ellipsis> Output mode </span> </a> </li> <li class=md-nav__item> <a href=../../cli/documentation/ class=md-nav__link> <span class=md-ellipsis> Documentation </span> </a> </li> <li class=md-nav__item> <a href=../../cli/shell-completion/ class=md-nav__link> <span class=md-ellipsis> Shell completion </span> </a> </li> <li class=md-nav__item> <a href=../../cli-reference/ class=md-nav__link> <span class=md-ellipsis> CLI reference </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8 id=__nav_8_label tabindex=0> <span class=md-ellipsis> Python API </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Python API </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../python/ class=md-nav__link> <span class=md-ellipsis> Getting started </span> </a> </li> <li class=md-nav__item> <a href=../../python/client/ class=md-nav__link> <span class=md-ellipsis> Client </span> </a> </li> <li class=md-nav__item> <a href=../../python/submit/ class=md-nav__link> <span class=md-ellipsis> Submitting jobs </span> </a> </li> <li class=md-nav__item> <a href=../../python/dependencies/ class=md-nav__link> <span class=md-ellipsis> Dependencies </span> </a> </li> <li class=md-nav__item> <a href=../../python/apidoc/ class=md-nav__link> <span class=md-ellipsis> API reference </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../changelog/ class=md-nav__link> <span class=md-ellipsis> Changelog </span> </a> </li> <li class=md-nav__item> <a href=../../faq/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> <li class=md-nav__item> <a href=../../other-tools/ class=md-nav__link> <span class=md-ellipsis> Comparison With Other Tools </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#starting-the-server class=md-nav__link> <span class=md-ellipsis> Starting the server </span> </a> </li> <li class=md-nav__item> <a href=#server-directory class=md-nav__link> <span class=md-ellipsis> Server directory </span> </a> </li> <li class=md-nav__item> <a href=#running-multiple-servers class=md-nav__link> <span class=md-ellipsis> Running multiple servers </span> </a> </li> <li class=md-nav__item> <a href=#keeping-the-server-alive class=md-nav__link> <span class=md-ellipsis> Keeping the server alive </span> </a> </li> <li class=md-nav__item> <a href=#resuming-stoppedcrashed-server class=md-nav__link> <span class=md-ellipsis> Resuming stopped/crashed server </span> </a> <nav class=md-nav aria-label="Resuming stopped/crashed server"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#exporting-journal-events class=md-nav__link> <span class=md-ellipsis> Exporting journal events </span> </a> </li> <li class=md-nav__item> <a href=#journal-report class=md-nav__link> <span class=md-ellipsis> Journal report </span> </a> </li> <li class=md-nav__item> <a href=#pruning-the-journal class=md-nav__link> <span class=md-ellipsis> Pruning the journal </span> </a> </li> <li class=md-nav__item> <a href=#flushing-the-journal class=md-nav__link> <span class=md-ellipsis> Flushing the journal </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#waiting-for-server-availability class=md-nav__link> <span class=md-ellipsis> Waiting for server availability </span> </a> </li> <li class=md-nav__item> <a href=#stopping-the-server class=md-nav__link> <span class=md-ellipsis> Stopping the server </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/It4innovations/hyperqueue/blob/main/docs/deployment/server.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg> </a> <h1>Server</h1> <p>The server is a crucial component of HyperQueue which manages <a href=../worker/ >workers</a> and <a href=../../jobs/jobs/ >jobs</a>. Before running any computations or deploying workers, you must first start the server.</p> <h2 id=starting-the-server>Starting the server<a class=headerlink href=#starting-the-server title="Permanent link">#</a></h2> <p>The server can be started by running the <a href=https://it4innovations.github.io/hyperqueue/stable/cli-reference/#hq/server/start><code>hq server start</code></a> command:</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>hq<span class=w> </span>server<span class=w> </span>start
</code></pre></div> <p>You can change the hostname under which the server is visible to workers with the --host option:</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>hq<span class=w> </span>server<span class=w> </span>start<span class=w> </span>--host<span class=o>=</span>HOST
</code></pre></div> <h2 id=server-directory>Server directory<a class=headerlink href=#server-directory title="Permanent link">#</a></h2> <p>When the server is started, it creates a <strong>server directory</strong> where it stores information needed for submitting <a href=../../jobs/jobs/ >jobs</a> and connecting <a href=../worker/ >workers</a>. This directory is then used to select a running HyperQueue instance.</p> <p>By default, the server directory will be stored in <code>$HOME/.hq-server</code>. This location may be changed with the option <code>--server-dir=&lt;PATH&gt;</code>, which is available for all HyperQueue CLI commands. You can run more instances of HyperQueue under the same Unix user, by making them use different server directories.</p> <p>If you use a non-default server directory, make sure to pass the same <code>--server-dir</code> to all HyperQueue commands that should use the selected HyperQueue server:</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>hq<span class=w> </span>--server-dir<span class=o>=</span>foo<span class=w> </span>server<span class=w> </span>start<span class=w> </span><span class=p>&amp;</span>
$<span class=w> </span>hq<span class=w> </span>--server-dir<span class=o>=</span>foo<span class=w> </span>worker<span class=w> </span>start
</code></pre></div> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>To avoid having to pass the <code>--server-dir</code> parameter to all <code>hq</code> commands separately, you can also pass it through the<code>HQ_SERVER_DIR</code> environment variable, and export it to share it for all commands in the same terminal session: <div class=highlight><pre><span></span><code>$<span class=w> </span><span class=nb>export</span><span class=w> </span><span class=nv>HQ_SERVER_DIR</span><span class=o>=</span>bar
$<span class=w> </span>hq<span class=w> </span>server<span class=w> </span>start<span class=w> </span><span class=p>&amp;</span>
$<span class=w> </span>hq<span class=w> </span>worker<span class=w> </span>start<span class=w> </span><span class=p>&amp;</span>
</code></pre></div></p> </div> <div class="admonition danger"> <p class=admonition-title>Server directory access</p> <p>Encryption keys are stored in the server directory. Whoever has access to the server directory may submit jobs, connect workers to the server and decrypt communication between HyperQueue components. By default, the directory is only accessible by the user who started the server.</p> </div> <h2 id=running-multiple-servers>Running multiple servers<a class=headerlink href=#running-multiple-servers title="Permanent link">#</a></h2> <p>When you start the server, it will create a new subdirectory in the server directory, which will store the data of the current running instance. It will also create a symlink <code>hq-current</code> which will point to the currently active subdirectory. Using this approach, you can start a server using the same server directory multiple times without overwriting data of the previous runs.</p> <h2 id=keeping-the-server-alive>Keeping the server alive<a class=headerlink href=#keeping-the-server-alive title="Permanent link">#</a></h2> <p>The server is supposed to be a long-lived component. If you shut it down, all workers will disconnect and all computations will be stopped. Therefore, it is important to make sure that the server will stay running e.g. even after you disconnect from a cluster where the server is deployed.</p> <p>For example, if you SSH into a login node of an HPC cluster and then run the server like this:</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>hq<span class=w> </span>server<span class=w> </span>start
</code></pre></div> <p>The server will quit when your SSH session ends, because it will receive a SIGHUP signal. You can use established Unix approaches to avoid this behavior, for example prepending the command with <a href=https://en.wikipedia.org/wiki/Nohup>nohup</a> or using a terminal multiplexer like <a href=https://en.wikipedia.org/wiki/Tmux>tmux</a>.</p> <h2 id=resuming-stoppedcrashed-server>Resuming stopped/crashed server<a class=headerlink href=#resuming-stoppedcrashed-server title="Permanent link">#</a></h2> <p>The server supports resilience, which allows it to restore its state after it is stopped or if it crashes. To enable resilience, you can tell the server to log events into a <em>journal</em> file, using the <code>--journal</code> flag:</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>hq<span class=w> </span>server<span class=w> </span>start<span class=w> </span>--journal<span class=w> </span>/path/to/journal
</code></pre></div> <p>If the server is stopped or it crashes, and you use the same command to start the server (using the same journal file path), it will continue from the last point:</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>hq<span class=w> </span>server<span class=w> </span>start<span class=w> </span>--journal<span class=w> </span>/path/to/journal
</code></pre></div> <p>This functionality restores the state of jobs and automatic allocation queues. However, it does not restore worker connections; in the current version, new workers have to be connected to the server after it restarts.</p> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>If the server crashes, the last few seconds of progress may be lost. For example, when a task is finished and the server crashes before the journal is written, then after resuming the server, the task will be recomputed.</p> </div> <h3 id=exporting-journal-events>Exporting journal events<a class=headerlink href=#exporting-journal-events title="Permanent link">#</a></h3> <p>If you'd like to programmatically analyze events that are stored in the journal file, you can export them to JSON using the <a href=https://it4innovations.github.io/hyperqueue/stable/cli-reference/#hq/journal/export><code>hq journal export</code></a> command:</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>hq<span class=w> </span>journal<span class=w> </span><span class=nb>export</span><span class=w> </span>&lt;journal-path&gt;
</code></pre></div> <p>The events will be read from the provided journal and printed to <code>stdout</code> encoded in JSON, one event per line (this corresponds to line-delimited JSON, i.e. <a href=https://jsonlines.org/ >JSON Lines</a>).</p> <p>You can also directly stream events in real-time from the server using the <a href=https://it4innovations.github.io/hyperqueue/stable/cli-reference/#hq/journal/stream><code>hq journal stream</code></a> command:</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>hq<span class=w> </span>journal<span class=w> </span>stream
</code></pre></div> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>The JSON format of the journal events and their definition is currently unstable and can change with a new HyperQueue version.</p> </div> <h3 id=journal-report>Journal report<a class=headerlink href=#journal-report title="Permanent link">#</a></h3> <p>You can export statistics from journal as an HTML report via:</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>hq<span class=w> </span>journal<span class=w> </span>report<span class=w> </span>&lt;journal-path&gt;<span class=w> </span>&lt;output-filename&gt;
</code></pre></div> <p>You may specify <code>--start-time</code> or <code>--end-time</code> to filter events whithin a given time frame. It takes duration and it is counted from the beginning of the journal. For example if you want to selected a 30min iterval after the first hour, you can use: <code>--start-time=1h</code> and <code>--end-time="1h 30m"</code>.</p> <h3 id=pruning-the-journal>Pruning the journal<a class=headerlink href=#pruning-the-journal title="Permanent link">#</a></h3> <p>The <a href=https://it4innovations.github.io/hyperqueue/stable/cli-reference/#hq/journal/prune><code>hq journal prune</code></a> command removes all completed jobs and disconnected workers from the journal file, in order to reduce its size on disk.</p> <h3 id=flushing-the-journal>Flushing the journal<a class=headerlink href=#flushing-the-journal title="Permanent link">#</a></h3> <p>The <a href=https://it4innovations.github.io/hyperqueue/stable/cli-reference/#hq/journal/flush><code>hq journal flush</code></a> command will force the server to flush the journal, so that the latest state of affairs is persisted to disk. It is mainly useful for testing or if you are going to run <code>hq journal export</code> while a server is running (however, it is usually better to use <code>hq journal stream</code>).</p> <h2 id=waiting-for-server-availability>Waiting for server availability<a class=headerlink href=#waiting-for-server-availability title="Permanent link">#</a></h2> <p>If you need to wait for a server to become available (for example when coordinating server startup in scripts), you can use the <a href=https://it4innovations.github.io/hyperqueue/stable/cli-reference/#hq/server/wait><code>hq server wait</code></a> command:</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>hq<span class=w> </span>server<span class=w> </span><span class=nb>wait</span>
</code></pre></div> <p>This command will repeatedly attempt to connect to the server (every 5 seconds) until it succeeds or until a timeout is reached. By default, it will wait for up to 5 minutes, but you can specify a custom timeout<sup id=fnref:1><a class=footnote-ref href=#fn:1>1</a></sup>:</p> <div class=highlight><pre><span></span><code><span class=c1># Wait for up to 2 minutes</span>
$<span class=w> </span>hq<span class=w> </span>server<span class=w> </span><span class=nb>wait</span><span class=w> </span>--timeout<span class=w> </span>2m
</code></pre></div> <p>This is particularly useful in deployment scripts where you start a server and then need to ensure it's ready before proceeding with other operations like connecting workers or submitting jobs.</p> <h2 id=stopping-the-server>Stopping the server<a class=headerlink href=#stopping-the-server title="Permanent link">#</a></h2> <p>You can stop a running server with the <a href=https://it4innovations.github.io/hyperqueue/stable/cli-reference/#hq/server/stop><code>hq server stop</code></a> command:</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>hq<span class=w> </span>server<span class=w> </span>stop
</code></pre></div> <p>When a server is stopped, all running jobs and connected workers will be immediately stopped.</p> <div class=footnote> <hr> <ol> <li id=fn:1> <p>You can use various <a href=../../cli/shortcuts/#duration>shortcuts</a> for the timeout duration.&#160;<a class=footnote-backref href=#fnref:1 title="Jump back to footnote 1 in the text">&#8617;</a></p> </li> </ol> </div> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="September 26, 2025 15:13:42 UTC">September 26, 2025</span> </span> <span class=md-source-file__fact> <span class=md-icon title=Created> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="November 2, 2021 10:37:14 UTC">November 2, 2021</span> </span> </aside> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../ class="md-footer__link md-footer__link--prev" aria-label="Previous: Architecture"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Architecture </div> </div> </a> <a href=../worker/ class="md-footer__link md-footer__link--next" aria-label="Next: Workers"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Workers </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["header.autohide", "navigation.instant", "navigation.top", "navigation.footer", "content.action.edit", "content.code.copy"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "stable", "provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.13a4f30d.min.js></script> </body> </html>