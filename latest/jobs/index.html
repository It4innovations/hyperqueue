<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Documentation of HyperQueue."><meta name=author content="Stanislav BÃ¶hm"><link href=https://it4innovations.github.io/hyperqueue/latest/jobs/ rel=canonical><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.2.3, mkdocs-material-7.3.4"><title>Submitting jobs - HyperQueue</title><link rel=stylesheet href=../assets/stylesheets/main.db9e7362.min.css><link rel=stylesheet href=../assets/stylesheets/palette.3f5d1f46.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style><link rel=stylesheet href=../stylesheets/extra.css><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-TM8J8R5GJ9"),document.addEventListener("DOMContentLoaded",function(){"undefined"!=typeof location$&&location$.subscribe(function(t){gtag("config","G-TM8J8R5GJ9",{page_path:t.pathname})})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-TM8J8R5GJ9"></script></head> <body dir=ltr data-md-color-scheme data-md-color-primary=none data-md-color-accent=none> <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#jobs class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title=HyperQueue class="md-header__button md-logo" aria-label=HyperQueue data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> HyperQueue </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Submitting jobs </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/It4innovations/hyperqueue/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title=HyperQueue class="md-nav__button md-logo" aria-label=HyperQueue data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> HyperQueue </label> <div class=md-nav__source> <a href=https://github.com/It4innovations/hyperqueue/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../install/ class=md-nav__link> Installation </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Getting Started <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Getting Started" data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../quickstart/ class=md-nav__link> Quickstart </a> </li> <li class=md-nav__item> <a href=../cheatsheet/ class=md-nav__link> Cheatsheet </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../deployment/ class=md-nav__link> Deployment </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5 checked> <label class=md-nav__link for=__nav_5> Jobs <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Jobs data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Jobs </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <a href=./ class="md-nav__link md-nav__link--active"> Submitting jobs </a> </li> <li class=md-nav__item> <a href=../arrays/ class=md-nav__link> Task Arrays </a> </li> <li class=md-nav__item> <a href=../cpus/ class=md-nav__link> CPU management </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../alloc/ class=md-nav__link> Automatic allocation </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7> Tips <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Tips data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Tips </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../streaming/ class=md-nav__link> Reducing amount of output files </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../faq/ class=md-nav__link> FAQ </a> </li> <li class=md-nav__item> <a href=../other-tools/ class=md-nav__link> Comparison with other tools </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/It4innovations/hyperqueue/blob/main/docs/jobs.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1 id=jobs>Jobs<a class=headerlink href=#jobs title="Permanent link">#</a></h1> <p>A <em>job</em> is a portion of work that can be submitted into a HyperQueue.</p> <p>Each job may have one or <em>tasks</em>. In the current version, a is a single execution of a program.</p> <p><strong>In this section, we are introducing simple jobs, where each job has exactly one tasks.</strong> See section about Job arrays for submitting more tasks in one job.</p> <h1 id=identification-numbers>Identification numbers<a class=headerlink href=#identification-numbers title="Permanent link">#</a></h1> <p>Each job is identified by a positive integer that is assigned by HyperQueue server when the job is submitted, we refer to it as <em>job id</em>.</p> <p>Each task is identified by an unsigned 32b integer called <em>task id</em>. Task id can be assigned by a user and same task id may be used in two different jobs.</p> <p>In simple jobs, task id is set to 0.</p> <h2 id=submitting-jobs>Submitting jobs<a class=headerlink href=#submitting-jobs title="Permanent link">#</a></h2> <p><code>hq submit &lt;program&gt; &lt;args1&gt; ...</code></p> <p>HyperQueue assigns a unique job id when a job is submitted.</p> <p>When your command contains its own switches, you need to use <code>--</code> after submit:</p> <p><code>hq submit -- /bin/bash -c 'echo $PPID'</code></p> <h3 id=name-of-a-job>Name of a job<a class=headerlink href=#name-of-a-job title="Permanent link">#</a></h3> <p>Each job has an assigned name. It has only an informative character for the user. By default, the name is extracted from the job's program name. You can set a job name explicitly by:</p> <p><code>hq submit --name=&lt;NAME&gt; ...</code></p> <h3 id=working-directory-of-a-job>Working directory of a job<a class=headerlink href=#working-directory-of-a-job title="Permanent link">#</a></h3> <p>You can change the working directory of a job using the <code>--cwd</code> parameter. By default it is set to the directory from which was the job submitted.</p> <p>!!! Hint</p> <pre><code>You can use [placeholders](#placeholders) in the working directory path.
</code></pre> <h3 id=output-of-the-job>Output of the job<a class=headerlink href=#output-of-the-job title="Permanent link">#</a></h3> <p>!!! Warning</p> <pre><code>If you want to avoid creating many files, see the section about streaming
</code></pre> <p>By default, each job will produce two files containing the standard output and standard error output, respectively.</p> <p>The paths where these files will be created can be changed via the parameters <code>--stdout=&lt;path&gt;</code> and <code>--stderr=&lt;path&gt;</code>. You can also disable creating stdout/stderr completely by setting value <code>none</code>.</p> <pre><code class=language-bash>$ hq submit --stdout=none ...
</code></pre> <p>The default values for these paths are <code>job-%{JOB_ID}/%{TASK_ID}.stdout</code> and <code>job-%{JOB_ID}/%{TASK_ID}.stderr</code>. You can read about the <code>%{JOB_ID}</code> and <code>%{TASK_ID}</code> placeholders <a href=#placeholders>below</a>.</p> <p>!!! Hint</p> <pre><code>You can use [placeholders](#placeholders) in the `stdout` and `stderr` paths.
</code></pre> <h2 id=placeholders>Placeholders<a class=headerlink href=#placeholders title="Permanent link">#</a></h2> <p>You can use special variables in working directory, <code>stdout</code> and <code>stderr</code> paths, which will be interpolated with job/task-specific information before the job is executed. Placeholders are enclosed in curly braces and prepended with a percent sign.</p> <p>Currently, you can use the following placeholders:</p> <table> <thead> <tr> <th>Placeholder</th> <th>Value</th> </tr> </thead> <tbody> <tr> <td><code>%{JOB_ID}</code></td> <td>Job ID.</td> </tr> <tr> <td><code>%{TASK_ID}</code></td> <td>Task ID.</td> </tr> <tr> <td><code>%{INSTANCE_ID}</code></td> <td>Instance ID (see below)</td> </tr> <tr> <td><code>%{SUBMIT_DIR}</code></td> <td>Directory from which the job was submitted.</td> </tr> <tr> <td><code>%{CWD}</code></td> <td>Working directory of the job.<br><br>This placeholder is only available for <code>stdout</code> and <code>stderr</code> paths.</td> </tr> <tr> <td><code>%{DATE}</code></td> <td>Current date when the job was executed in the RFC3339 format.</td> </tr> </tbody> </table> <h2 id=setting-env-variables>Setting env variables<a class=headerlink href=#setting-env-variables title="Permanent link">#</a></h2> <p>In a submit of a task, you can set an environment variable named <code>KEY</code> with the value <code>VAL</code> by:</p> <p><code>--env KEY=VAL</code></p> <p>You can pass the following flag multiple times to pass multiple variables.</p> <h2 id=information-about-jobs>Information about jobs<a class=headerlink href=#information-about-jobs title="Permanent link">#</a></h2> <p>List of all jobs:</p> <p><code>hq jobs</code></p> <p>List of jobs in a defined state:</p> <p><code>hq jobs &lt;filters...&gt;</code></p> <p>Where filters can be: <code>waiting</code>, <code>running</code>, <code>finished</code>, <code>failed</code>, or <code>canceled</code>.</p> <p>Detailed information about a job:</p> <p><code>hq job &lt;job-id&gt;</code></p> <p>!!! Hint</p> <pre><code>You can also use `hq job last` to get information about the most recently submitted job.
</code></pre> <h2 id=task-states>Task states<a class=headerlink href=#task-states title="Permanent link">#</a></h2> <pre><code>Submitted
   |
   |
   v
Waiting-----------------\
   | ^                  |
   | |                  |
   v |                  |
Running-----------------|
   | |                  |
   | \--------\         |
   |          |         |
   v          v         v
Finished    Failed   Canceled
</code></pre> <ul> <li><em>Submitted</em> - Only an informative state that a submission was successful; it is only shown immediately after a submit.</li> <li><em>Waiting</em> - The task is waiting to be executed.</li> <li><em>Running</em> - The task is running in a worker. It may become "waiting" again when a worker (where the task is running) is lost.</li> <li><em>Finished</em> - The task has successfully finished.</li> <li><em>Failed</em> - The task has failed. The error can be shown by <code>hq job &lt;job-id&gt;</code>.</li> <li><em>Canceled</em> - The task has been canceled by a user.</li> </ul> <h2 id=time-management>Time management<a class=headerlink href=#time-management title="Permanent link">#</a></h2> <p>Time management is split into two settings:</p> <ul> <li><strong>time limit</strong> - It is the maximal running time of a task. If it is reached then task is terminated and set into FAILED state. This setting does not have any impact on scheduling.</li> <li><strong>time request</strong> - The minimal remaining lifetime of a worker needed to start the task. Workers that do not have enough remaining lifetime will not be scheduled to run this task. Once the task is scheduled and starts executing, it does not matter w.r.t this setting for how long it will actually run. Workers without known remaining lifetime is always assumed that it may execute any time request. </li> </ul> <p>We have separated these settings to solve the following scenario. Lets us assume that we have a collection of task where the vast majority of tasks usually finish within 10 minutes but some of them run 30 minutes. We do not know in advance which tasks are slow. In this situation, we want to set the time limit to 35 minutes to protect us against an error. However, we want to schedule the task to worker as long as it has at least 10 minutes of lifetime despite we are risking of rare losing some computation time when worker dies before the computation is finished. (Note that in this situation, a task is rescheduled to another worker; we have only lost some computational power and not the whole task.)</p> <h3 id=time-limit>Time limit<a class=headerlink href=#time-limit title="Permanent link">#</a></h3> <p>Time limit is set as follows:</p> <p><code>hq submit --time-limit=TIME ...</code></p> <p>Where <code>TIME</code> is a number followed by units (e.g. <code>10 min</code>)</p> <h3 id=time-request>Time request<a class=headerlink href=#time-request title="Permanent link">#</a></h3> <p>Time request is set as follows:</p> <p><code>hq submit --time-request=TIME</code></p> <h3 id=time-units>Time Units<a class=headerlink href=#time-units title="Permanent link">#</a></h3> <p>You can use the following units:</p> <ul> <li>msec, ms -- milliseconds</li> <li>seconds, second, sec, s</li> <li>minutes, minute, min, m</li> <li>hours, hour, hr, h</li> <li>days, day, d</li> <li>weeks, week, w</li> <li>months, month, M -- defined as 30.44 days</li> <li>years, year, y -- defined as 365.25 days</li> </ul> <p>Time can be also a combination of more units:</p> <p><code>hq submit --time-limit="1h 30min" ...</code></p> <h2 id=task-instance>Task instance<a class=headerlink href=#task-instance title="Permanent link">#</a></h2> <p>It may happen that a task is started more than once when a worker crashes during execution of a task and the task is rescheduled to another worker. Instance IDs exist to distinguish each run when necessary. Instance ID is 32b non-negative number and it is guarantted that the newer execution has a bigger value. HyperQueue explicitly does <em>not</em> guarantee any specific value or differences between two ids. Instance ID is valid only for a particular task. Two different tasks may have the same instance ID.</p> <h2 id=job-states>Job states<a class=headerlink href=#job-states title="Permanent link">#</a></h2> <p>In simple jobs, job state corresponds directly to the state of its single task. In the case of task arrays, see the chapter about <a href=../arrays/ >task arrays</a>.</p> <h2 id=canceling-jobs>Canceling jobs<a class=headerlink href=#canceling-jobs title="Permanent link">#</a></h2> <p>A job cannot be canceled if it is already finished, failed, or canceled.</p> <ul> <li>Cancel specific job:</li> </ul> <p><code>hq cancel &lt;job-id&gt;</code></p> <ul> <li>Cancel all jobs:</li> </ul> <p><code>hq cancel all</code></p> <ul> <li>Cancel last submitted job:</li> </ul> <p><code>hq cancel last</code></p> <h2 id=waiting-for-jobs>Waiting for jobs<a class=headerlink href=#waiting-for-jobs title="Permanent link">#</a></h2> <p>You can submit a job with flag <code>--wait</code> and HQ will wait until the submitted job is not terminated (until all tasks are either finished, failed or canceled).</p> <p>You can also use <code>hq wait &lt;job-id&gt;</code> to wait for a specific job or <code>hq wait last</code> to wait for the last submitted job or <code>hq wait all</code> to wait for all jobs.</p> <p>If you want to interactively observe the status of the jobs while waiting for them to finish, use <code>hq submit --progress</code> or <code>hq progress &lt;job-id&gt;</code> instead.</p> <h2 id=priorities>Priorities<a class=headerlink href=#priorities title="Permanent link">#</a></h2> <p>Priorities affect the order in which the "waiting" tasks are executed. Priority can be any 32b <em>signed</em> integer. A lowest number marks the lowest priority, e.g. when task A with priority 5 and task B with priority 3 are scheduled to the same worker, and only one of them may be executed, then A will be executed first.</p> <p>In a submit of a task, you can set priority as follows</p> <p><code>hq submit --priority=&lt;PRIORITY&gt;</code></p> <p>If no priority is specified, then task has priority 0.</p> <h2 id=resubmit>Resubmit<a class=headerlink href=#resubmit title="Permanent link">#</a></h2> <p>If you want to recompute a previous job, jou can use:</p> <p><code>hq resubmit &lt;job-id&gt;</code></p> <p>that creates a new job with the exact the same configuration as the source job.</p> <p>By default, it submits all tasks of the original job; however, you can specify only a subset of tasks, e.g.</p> <p><code>hq resubmit &lt;job-id&gt; --status=failed,canceled</code></p> <p>Resubmits only tasks that failed or were canceled.</p> <hr> <div class=md-source-date> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">October 7, 2021</span> <br>Created: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">May 4, 2021</span> </small> </div> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../deployment/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Deployment" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Deployment </div> </div> </a> <a href=../arrays/ class="md-footer__link md-footer__link--next" aria-label="Next: Task Arrays" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Task Arrays </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["header.autohide", "navigation.instant", "navigation.top"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.8397ff9e.min.js", "version": {"provider": "mike", "default": "stable"}}</script> <script src=../assets/javascripts/bundle.1e84347e.min.js></script> </body> </html>