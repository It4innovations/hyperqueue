<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Documentation of HyperQueue."><meta name=author content="Ada Böhm, Jakub Beránek"><link href=https://it4innovations.github.io/hyperqueue/stable/deployment/worker/ rel=canonical><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.2.3, mkdocs-material-7.3.2"><title>Workers - HyperQueue</title><link rel=stylesheet href=../../assets/stylesheets/main.24c991ad.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.3f5d1f46.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style><link rel=stylesheet href=../../stylesheets/extra.css><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-TM8J8R5GJ9"),document.addEventListener("DOMContentLoaded",function(){"undefined"!=typeof location$&&location$.subscribe(function(t){gtag("config","G-TM8J8R5GJ9",{page_path:t.pathname})})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-TM8J8R5GJ9"></script></head> <body dir=ltr data-md-color-scheme data-md-color-primary=none data-md-color-accent=none> <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#starting-workers class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title=HyperQueue class="md-header__button md-logo" aria-label=HyperQueue data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> HyperQueue </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Workers </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/It4innovations/hyperqueue/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title=HyperQueue class="md-nav__button md-logo" aria-label=HyperQueue data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> HyperQueue </label> <div class=md-nav__source> <a href=https://github.com/It4innovations/hyperqueue/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../../installation/ class=md-nav__link> Installation </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_3 type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3> Getting Started <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Getting Started" data-md-level=1> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../quickstart/ class=md-nav__link> Quickstart </a> </li> <li class=md-nav__item> <a href=../../cheatsheet/ class=md-nav__link> Cheatsheet </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_4 type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4> Examples <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Examples data-md-level=1> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Examples </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../examples/ class=md-nav__link> Examples </a> </li> <li class=md-nav__item> <a href=../../examples/iterative-computation/ class=md-nav__link> Iterative computation </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_5 type=checkbox id=__nav_5 checked> <label class=md-nav__link for=__nav_5> Deployment <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=Deployment data-md-level=1> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Deployment </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> Architecture </a> </li> <li class=md-nav__item> <a href=../server/ class=md-nav__link> Server </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Workers <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Workers </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#starting-workers class=md-nav__link> Starting workers </a> <nav class=md-nav aria-label="Starting workers"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#automatic-worker-deployment-recommended class=md-nav__link> Automatic worker deployment (recommended) </a> </li> <li class=md-nav__item> <a href=#manual-worker-deployment class=md-nav__link> Manual worker deployment </a> <nav class=md-nav aria-label="Manual worker deployment"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#deploying-a-worker-using-pbsslurm class=md-nav__link> Deploying a worker using PBS/Slurm </a> </li> <li class=md-nav__item> <a href=#stopping-workers class=md-nav__link> Stopping workers </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#time-limit class=md-nav__link> Time limit </a> </li> <li class=md-nav__item> <a href=#idle-timeout class=md-nav__link> Idle timeout </a> </li> <li class=md-nav__item> <a href=#worker-state class=md-nav__link> Worker state </a> <nav class=md-nav aria-label="Worker state"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#lost-connection-to-the-server class=md-nav__link> Lost connection to the server </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#useful-worker-commands class=md-nav__link> Useful worker commands </a> <nav class=md-nav aria-label="Useful worker commands"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#display-worker-list class=md-nav__link> Display worker list </a> </li> <li class=md-nav__item> <a href=#display-information-about-a-specific-worker class=md-nav__link> Display information about a specific worker </a> </li> <li class=md-nav__item> <a href=#worker-groups class=md-nav__link> Worker groups </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../allocation/ class=md-nav__link> Automatic Allocation </a> </li> <li class=md-nav__item> <a href=../cloud/ class=md-nav__link> Without Shared Filesystem </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_6 type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6> Task computation <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Task computation" data-md-level=1> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Task computation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../jobs/jobs/ class=md-nav__link> Jobs and Tasks </a> </li> <li class=md-nav__item> <a href=../../jobs/arrays/ class=md-nav__link> Task Arrays </a> </li> <li class=md-nav__item> <a href=../../jobs/resources/ class=md-nav__link> Resources </a> </li> <li class=md-nav__item> <a href=../../jobs/cresources/ class=md-nav__link> CPU Resources </a> </li> <li class=md-nav__item> <a href=../../jobs/failure/ class=md-nav__link> Handling Failure </a> </li> <li class=md-nav__item> <a href=../../jobs/streaming/ class=md-nav__link> Output Streaming </a> </li> <li class=md-nav__item> <a href=../../jobs/directives/ class=md-nav__link> Directives </a> </li> <li class=md-nav__item> <a href=../../jobs/jobfile/ class=md-nav__link> Job Definition File </a> </li> <li class=md-nav__item> <a href=../../jobs/multinode/ class=md-nav__link> Multinode Tasks </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_7 type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7> CLI <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label=CLI data-md-level=1> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> CLI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../cli/shortcuts/ class=md-nav__link> Shortcuts </a> </li> <li class=md-nav__item> <a href=../../cli/dashboard/ class=md-nav__link> Dashboard </a> </li> <li class=md-nav__item> <a href=../../cli/output-mode/ class=md-nav__link> Output mode </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=__nav_8 type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8> Python API <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav aria-label="Python API" data-md-level=1> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Python API </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../python/ class=md-nav__link> Getting started </a> </li> <li class=md-nav__item> <a href=../../python/client/ class=md-nav__link> Client </a> </li> <li class=md-nav__item> <a href=../../python/submit/ class=md-nav__link> Submitting jobs </a> </li> <li class=md-nav__item> <a href=../../python/dependencies/ class=md-nav__link> Dependencies </a> </li> <li class=md-nav__item> <a href=../../python/apidoc/ class=md-nav__link> API reference </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../events/ class=md-nav__link> Events </a> </li> <li class=md-nav__item> <a href=../../faq/ class=md-nav__link> FAQ </a> </li> <li class=md-nav__item> <a href=../../other-tools/ class=md-nav__link> Comparison With Other Tools </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#starting-workers class=md-nav__link> Starting workers </a> <nav class=md-nav aria-label="Starting workers"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#automatic-worker-deployment-recommended class=md-nav__link> Automatic worker deployment (recommended) </a> </li> <li class=md-nav__item> <a href=#manual-worker-deployment class=md-nav__link> Manual worker deployment </a> <nav class=md-nav aria-label="Manual worker deployment"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#deploying-a-worker-using-pbsslurm class=md-nav__link> Deploying a worker using PBS/Slurm </a> </li> <li class=md-nav__item> <a href=#stopping-workers class=md-nav__link> Stopping workers </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#time-limit class=md-nav__link> Time limit </a> </li> <li class=md-nav__item> <a href=#idle-timeout class=md-nav__link> Idle timeout </a> </li> <li class=md-nav__item> <a href=#worker-state class=md-nav__link> Worker state </a> <nav class=md-nav aria-label="Worker state"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#lost-connection-to-the-server class=md-nav__link> Lost connection to the server </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#useful-worker-commands class=md-nav__link> Useful worker commands </a> <nav class=md-nav aria-label="Useful worker commands"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#display-worker-list class=md-nav__link> Display worker list </a> </li> <li class=md-nav__item> <a href=#display-information-about-a-specific-worker class=md-nav__link> Display information about a specific worker </a> </li> <li class=md-nav__item> <a href=#worker-groups class=md-nav__link> Worker groups </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/It4innovations/hyperqueue/blob/main/docs/deployment/worker.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1>Workers</h1> <p>Workers connect to a running instance of a HyperQueue <a href=../server/ >server</a> and wait for task assignments. Once some task is assigned to them, they will compute it and notify the server of its completion.</p> <h2 id=starting-workers>Starting workers<a class=headerlink href=#starting-workers title="Permanent link">#</a></h2> <p>Workers should be started on machines that will actually execute the submitted computations, e.g. computing nodes on an HPC cluster. You can either use the automatic allocation system of HyperQueue to start workers as needed, or deploy workers manually.</p> <h3 id=automatic-worker-deployment-recommended>Automatic worker deployment (recommended)<a class=headerlink href=#automatic-worker-deployment-recommended title="Permanent link">#</a></h3> <p>If you are using a job manager (PBS or Slurm) on an HPC cluster, the easiest way of deploying workers is to use <a href=../allocation/ ><strong>Automatic allocation</strong></a>. It is a component of HyperQueue that takes care of submitting PBS/Slurm jobs and spawning HyperQueue workers.</p> <h3 id=manual-worker-deployment>Manual worker deployment<a class=headerlink href=#manual-worker-deployment title="Permanent link">#</a></h3> <p>If you want to start a worker manually, you can use the following command:</p> <div class=highlight><pre><span></span><code>$ hq worker start
</code></pre></div> <p>Each worker will be assigned a unique ID that you can use in later commands to query information about the worker or to <a href=#stopping-worker>stop</a> it.</p> <p>By default, the worker will try to connect to a server using the default <a href=../server/#server-directory>server directory</a>. If you want to connect to a different server, use the <code>--server-dir</code> option.</p> <div class="admonition important"> <p class=admonition-title>Sharing the server directory</p> <p>When you start a worker, it will need to read the server directory to find out how to connect to the server. The directory thus has to be accesible both by the server and the worker machines. On HPC clusters, it is common that login nodes and compute nodes use a shared filesystem, so this shouldn't be a problem.</p> <p>However, if a shared filesystem is not available on your cluster, you can just copy the server directory from the server machine to the worker machine and access it from there. The worker machine still has to be able to initiate a TCP/IP connection to the server machine though.</p> </div> <h4 id=deploying-a-worker-using-pbsslurm>Deploying a worker using PBS/Slurm<a class=headerlink href=#deploying-a-worker-using-pbsslurm title="Permanent link">#</a></h4> <p>If you want to manually start a worker using PBS or Slurm, simply use the corresponding submit command (<code>qsub</code> or <code>sbatch</code>) and run the <code>hq worker start</code> command inside the allocated job. If you want to start a worker on each allocated node, you can run this command on each node using e.g. <code>mpirun</code>.</p> <p>Example submission script:</p> <div class="tabbed-set tabbed-alternate" data-tabs=1:2><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><input id=__tabbed_1_2 name=__tabbed_1 type=radio><div class=tabbed-labels><label for=__tabbed_1_1>PBS</label><label for=__tabbed_1_2>Slurm</label></div> <div class=tabbed-content> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=ch>#!/bin/bash</span>
<span class=c1>#PBS -q &lt;queue&gt;</span>

<span class=c1># Run a worker on the main node</span>
/&lt;path-to-hyperqueue&gt;/hq<span class=w> </span>worker<span class=w> </span>start<span class=w> </span>--manager<span class=w> </span>pbs

<span class=c1># Run a worker on all allocated nodes</span>
ml<span class=w> </span>OpenMPI
pbsdsh<span class=w> </span>/&lt;path-to-hyperqueue&gt;/hq<span class=w> </span>worker<span class=w> </span>start<span class=w> </span>--manager<span class=w> </span>pbs
</code></pre></div> </div> <div class=tabbed-block> <div class=highlight><pre><span></span><code><span class=ch>#!/bin/bash</span>
<span class=c1>#SBATCH --partition &lt;partition&gt;</span>

<span class=c1># Run a worker on the main node</span>
/&lt;path-to-hyperqueue&gt;/hq<span class=w> </span>worker<span class=w> </span>start<span class=w> </span>--manager<span class=w> </span>slurm

<span class=c1># Run a worker on all allocated nodes</span>
ml<span class=w> </span>OpenMPI
srun<span class=w> </span>--overlap<span class=w> </span>/&lt;path-to-hyperqueue&gt;/hq<span class=w> </span>worker<span class=w> </span>start<span class=w> </span>--manager<span class=w> </span>slurm
</code></pre></div> </div> </div> </div> <p>The worker will try to automatically detect that it is started under a PBS/Slurm job, but you can also explicitly pass the option <code>--manager &lt;pbs/slurm&gt;</code> to tell the worker that it should expect a specific environment.</p> <h4 id=stopping-workers>Stopping workers<a class=headerlink href=#stopping-workers title="Permanent link">#</a></h4> <p>If you have started a worker manually, and you want to stop it, you can use the <code>hq worker stop</code> command<sup id=fnref:2><a class=footnote-ref href=#fn:2>1</a></sup>:</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>hq<span class=w> </span>worker<span class=w> </span>stop<span class=w> </span>&lt;selector&gt;
</code></pre></div> <h2 id=time-limit>Time limit<a class=headerlink href=#time-limit title="Permanent link">#</a></h2> <p>HyperQueue workers are designed to be volatile, i.e. it is expected that they will be stopped from time to time, because they are often started inside PBS/Slurm jobs that have a limited duration.</p> <p>It is very useful for the workers to know how much remaining time ("lifetime") do they have until they will be stopped. This duration is called the <code>Worker time limit</code>.</p> <p>When a worker is started manually inside a PBS or Slurm job, it will automatically calculate the time limit from the job's metadata. If you want to set time limit for workers started outside of PBS/Slurm jobs or if you want to override the detected settings, you can use the <code>--time-limit=&lt;DURATION&gt;</code> option<sup id=fnref:1><a class=footnote-ref href=#fn:1>2</a></sup> when starting the worker.</p> <p>When the time limit is reached, the worker is automatically terminated.</p> <p>The time limit of a worker affects what tasks can be scheduled to it. For example, a task submitted with <code>--time-request 10m</code> will not be scheduled onto a worker that only has a remaining time limit of 5 minutes.</p> <h2 id=idle-timeout>Idle timeout<a class=headerlink href=#idle-timeout title="Permanent link">#</a></h2> <p>When you deploy <em>HQ</em> workers inside a PBS or Slurm job, keeping the worker alive will drain resources from your accounting project (unless you use a free queue). If a worker has nothing to do, it might be better to terminate it sooner to avoid paying these costs for no reason.</p> <p>You can achieve this using <code>Worker idle timeout</code>. If you use it, the worker will automatically stop if it receives no task to compute for the specified duration. For example, if you set the idle duration to five minutes, the worker will stop once it hadn't received any task to compute for five minutes.</p> <p>You can set the idle timeout using the <code>--idle-timeout</code> option<sup id=fnref2:1><a class=footnote-ref href=#fn:1>2</a></sup> when starting the worker.</p> <div class="admonition tip"> <p class=admonition-title>Tip</p> <p>Workers started <a href=../allocation/#behavior>automatically</a> have the idle timeout set to five minutes.</p> </div> <p>Idle timeout can also be configured globally for all workers using the <code>--idle-timeout</code> option when starting a server:</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>hq<span class=w> </span>server<span class=w> </span>start<span class=w> </span>--idle-timeout<span class=o>=</span>&lt;TIMEOUT&gt;
</code></pre></div> <p>This value will be then used for each worker that does not explicitly specify its own idle timeout.</p> <h2 id=worker-state>Worker state<a class=headerlink href=#worker-state title="Permanent link">#</a></h2> <p>Each worker can be in one of the following states:</p> <ul> <li><strong>Running</strong> Worker is running and is able to process tasks</li> <li><strong>Connection lost</strong> Worker lost connection to the server. Probably someone manually killed the worker or job walltime in its PBS/Slurm job was <a href=#time-limit>reached</a>.</li> <li><strong>Heartbeat lost</strong> Communication between server and worker was interrupted. It usually signifies a network problem or a hardware crash of the computational node.</li> <li><strong>Stopped</strong> Worker was <a href=#stopping-worker>stopped</a>.</li> <li><strong>Idle timeout</strong> Worker was terminated due to <a href=#idle-timeout>Idle timeout</a>.</li> </ul> <h3 id=lost-connection-to-the-server>Lost connection to the server<a class=headerlink href=#lost-connection-to-the-server title="Permanent link">#</a></h3> <p>The behavior of what should happen with a worker that lost its connection to the server is configured via <code>hq worker start --on-server-lost=&lt;policy&gt;</code>. You can select from two policies:</p> <ul> <li><code>stop</code> - The worker immediately terminates and kills all currently running tasks.</li> <li><code>finish-running</code> - The worker does not start to execute any new tasks, but it tries to finish tasks that are already running. When all such tasks finish, the worker will terminate.</li> </ul> <p><code>stop</code> is the default policy when a worker is manually started by <code>hq worker start</code>. When a worker is started by the <a href=../allocation/ >automatic allocator</a>, then <code>finish-running</code> is used as the default value.</p> <h2 id=useful-worker-commands>Useful worker commands<a class=headerlink href=#useful-worker-commands title="Permanent link">#</a></h2> <p>Here is a list of useful worker commands:</p> <h3 id=display-worker-list>Display worker list<a class=headerlink href=#display-worker-list title="Permanent link">#</a></h3> <p>This command will display a list of workers that are currently connected to the server: <div class=highlight><pre><span></span><code>$<span class=w> </span>hq<span class=w> </span>worker<span class=w> </span>list
</code></pre></div></p> <p>If you also want to include workers that are offline (i.e. that have crashed or disconnected in the past), pass the <code>--all</code> flag to the <code>list</code> command.</p> <h3 id=display-information-about-a-specific-worker>Display information about a specific worker<a class=headerlink href=#display-information-about-a-specific-worker title="Permanent link">#</a></h3> <div class=highlight><pre><span></span><code>$<span class=w> </span>hq<span class=w> </span>worker<span class=w> </span>info<span class=w> </span>&lt;worker-id&gt;
</code></pre></div> <h3 id=worker-groups>Worker groups<a class=headerlink href=#worker-groups title="Permanent link">#</a></h3> <p>Each worker is a member exactly of one group. Groups are used when multi-node tasks are used. See more <a href=../../jobs/multinode/#groups>here</a></p> <div class=footnote> <hr> <ol> <li id=fn:2> <p>You can use various <a href=../../cli/shortcuts/#id-selector>shortcuts</a> to select multiple workers at once.&#160;<a class=footnote-backref href=#fnref:2 title="Jump back to footnote 1 in the text">&#8617;</a></p> </li> <li id=fn:1> <p>You can use various <a href=../../cli/shortcuts/#duration>shortcuts</a> for the duration value.&#160;<a class=footnote-backref href=#fnref:1 title="Jump back to footnote 2 in the text">&#8617;</a><a class=footnote-backref href=#fnref2:1 title="Jump back to footnote 2 in the text">&#8617;</a></p> </li> </ol> </div> <hr> <div class=md-source-date> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">November 27, 2023</span> <br>Created: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">November 2, 2021</span> </small> </div> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top data-md-state=hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg> Back to top </a> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../server/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Server" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Server </div> </div> </a> <a href=../allocation/ class="md-footer__link md-footer__link--next" aria-label="Next: Automatic Allocation" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Automatic Allocation </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["header.autohide", "navigation.instant", "navigation.top"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.e99e714c.min.js", "version": {"provider": "mike", "default": "stable"}}</script> <script src=../../assets/javascripts/bundle.bc35569b.min.js></script> </body> </html>